# Курс Введение в Data Engineering: дата пайплайны

Исходный [репо](https://startdatajourney.com/ru/course/luigi-data-pipelines?utm_source=github&utm_medium=repository&utm_campaign=luigi-course-materials) автора курса


### Prerequisites (for Windows users)

#### Ставим софт
Для прохождения курса необходимо будет развернуть локально виртуальную инфраструктуру.    
Сначала установить Virtual Box. Берём [отсюда](https://www.virtualbox.org/)    
Ставим только сам VB, никаких образов операционных систем качать и устанавливать не надо!    
Потом ставим тулзу Vagrant. Берём [отсюда](https://www.vagrantup.com/downloads.html)    
Из РФ понадобится VPN (и во время скачивания, и во время установки)    

#### Сетап Vagrant
Клонируем репо проекта на локальную машину.    
Переходим в папку проекта. Открываем Power Shell.      
Запускаем команду
``` bash
vagrant up
```
Начнётся процесс скачивания бокса с операционной системой и установкой всех необходимых пакетов.
Если все прошло удачно, пишем к терминале
``` bash
vagrant ssh   
```
Попадаем в сеанс виртуальной машины.

На виртуальном хосте будет две папки:
* /vagrant - это по сути подмонтированная из винды папка нашего репо, которую мы видим из линукса в терминале   
* /home/vagrant - домашняя папка юзера vagrant с настройками входа и прочее   

Создаём виртуальное окружение:
``` bash
python3 -m venv ~/.env/luigi_env
```

Активируем виртуальное окружение:
``` bash
source ~/.env/luigi_env/bin/activate    
```
Чтобы каждый раз не активировать окружение при логине, сделаем его автоматическую активацию.    
Возвращаемся в домашнюю папку:
``` bash
 cd ~/
```
Открываем файл с настроками    
``` bash
nano ~/.profile
```
В самом конце дописываем:    
``` bash
source ~/.env/luigi_env/bin/activate    
```

Сохраняем. Выходим из nano. Перелогиниваемся
``` bash
logout | vagrant ssh    
```

#### Устанавливаем зависимости для проекта    

Теперь установим пакеты, необходимы для решения задач из курса
``` bash
cd /vagrant
pip install -r requirements.txt
```

### Как будет выглядеть рабочий процесс ?

Открываем VSCode - > Explorer, переходим в папку с проектом.    
Вызываем терминал. Запускаем:
``` bash
vagrant up
```
Ждём поднятия ВМ.    
Логинимся:
``` bash
vagrant ssh.
```
Теперь мы на удаленнм хосте и сразу в рабочем окружении.    
Что имеем: код лежит на нашей машине и отсюда же мы пушим его в гит.  
Не надо прописывать заново ssh ключи для ВМ и добавлять их в Гитхаб.  
А исполняется код на ВМ, где он сразу доступен после редактирования. Профит!    